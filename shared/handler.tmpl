{{- $Root := . -}}
package shared

import (
	"github.com/RPP1011/rendezvous/packets"
)

type ReliablePacketHandler interface {
	HandlePacket(packet *packets.ReliablePacket)
	{{- range .OneofFields }}
	handle{{ .Name }}(packet *packets.ReliablePacket_{{ .Name }})
	{{- end }}
}

type DefaultReliablePacketHandler struct {}

func (p *DefaultReliablePacketHandler) HandlePacket(packet *packets.ReliablePacket) {
	switch packet.Value.(type) {
	{{- range .OneofFields }}
	case *packets.ReliablePacket_{{ .Name }}:
		p.handle{{ .Name }}(packet.Value.(*packets.ReliablePacket_{{ .Name }}))
	{{- end }}
	}
}

{{- range .OneofFields }}

func (p *DefaultReliablePacketHandler) handle{{ .Name }}(packet *packets.ReliablePacket_{{ .Name }}) {
	println("Received {{ .Name }} packet on DefaultReliablePacketHandler")
}

{{- end }}
